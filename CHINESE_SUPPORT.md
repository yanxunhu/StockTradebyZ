# 中文字符支持说明

## 概述

本GUI应用已经过专门优化，确保在Windows系统上能够正确显示中文字符。所有界面元素、配置文件、日志信息等都支持中文显示。

## 字体配置

### 默认字体设置

应用程序使用 **Microsoft YaHei（微软雅黑）** 作为默认字体，这是Windows系统中对中文支持最好的字体之一。

### 字体应用范围

- **窗口标题**: Z哥战法 - 股票策略选择器
- **标签和按钮**: 所有中文标签和按钮文本
- **表格显示**: 策略名称、股票名称等中文内容
- **文本框**: 配置文件编辑、日志显示等
- **消息框**: 错误提示、确认对话框等

## 编码设置

### 环境变量配置

应用程序在启动时会自动设置以下环境变量：

```python
os.environ['PYTHONIOENCODING'] = 'utf-8'
if sys.platform == "win32":
    os.environ['PYTHONUTF8'] = '1'
```

### 文件读写编码

所有配置文件（如 `configs.json`）都使用 UTF-8 编码进行读写：

```python
with open("configs.json", 'r', encoding='utf-8') as f:
    config = json.load(f)
```

## 支持的中文内容

### 界面元素

- ✅ 数据获取
- ✅ 策略选择
- ✅ 配置管理
- ✅ 日志查看
- ✅ 开始选股
- ✅ 查看结果
- ✅ 导出结果
- ✅ 市值范围设置
- ✅ 增量更新模式
- ✅ 小散模式

### 策略名称

- ✅ BBI+KDJ策略
- ✅ 超级B1策略
- ✅ BBI多空策略
- ✅ 峰值KDJ策略
- ✅ 其他自定义策略

### 股票信息

- ✅ 股票名称（如：平安银行、万科A、招商银行）
- ✅ 市场名称（如：上证、深证、创业板）
- ✅ 行业分类

## 测试验证

### 运行中文显示测试

项目包含专门的中文字符显示测试脚本：

```bash
python test_chinese_display.py
```

该测试会验证：
1. 窗口标题中的中文
2. 各种标签中的中文文本
3. 表格标题和内容中的中文
4. 文本框中的中文段落

### 测试结果确认

如果测试窗口中所有中文都能正确显示，说明字体配置成功！

## 可执行文件支持

### Nuitka编译配置

构建脚本 `build_exe.py` 已经配置了正确的编码设置：

```python
# 设置环境变量以支持中文字符
os.environ['PYTHONIOENCODING'] = 'utf-8'
if sys.platform == "win32":
    os.environ['PYTHONUTF8'] = '1'
```

### 可执行文件元数据

生成的可执行文件包含中文元数据：

- **产品名称**: Z哥战法股票策略选择器
- **文件描述**: 专业的A股量化选股工具
- **版权信息**: Copyright (c) 2024

## 故障排除

### 中文显示异常

如果遇到中文显示问题，请检查：

1. **系统字体**: 确保系统安装了 Microsoft YaHei 字体
2. **系统编码**: Windows系统区域设置为中文
3. **Python环境**: 确保Python环境支持UTF-8编码

### 常见问题解决

**问题1**: 界面中文显示为方框或乱码

**解决方案**:
```python
# 手动设置字体
root.option_add('*Font', 'SimSun 9')  # 使用宋体作为备选
```

**问题2**: 配置文件中文读取错误

**解决方案**:
```python
# 确保使用UTF-8编码
with open('configs.json', 'r', encoding='utf-8') as f:
    data = json.load(f)
```

**问题3**: 日志中文输出异常

**解决方案**:
```python
# 设置日志编码
logging.basicConfig(encoding='utf-8')
```

## 技术细节

### 字体优先级

1. **首选**: Microsoft YaHei（微软雅黑）
2. **备选**: SimSun（宋体）
3. **系统默认**: 系统默认中文字体

### 编码处理流程

1. **启动时**: 设置环境变量
2. **界面创建**: 配置字体样式
3. **文件操作**: 指定UTF-8编码
4. **数据处理**: 确保Unicode兼容

### 兼容性说明

- ✅ Windows 10/11
- ✅ Python 3.8+
- ✅ Tkinter 8.6+
- ✅ 所有主流中文输入法

## 更新日志

### v1.0.0
- ✅ 完整的中文界面支持
- ✅ UTF-8编码配置
- ✅ Microsoft YaHei字体集成
- ✅ 中文显示测试脚本
- ✅ 可执行文件中文支持

---

如有任何中文显示相关问题，请参考本文档或运行测试脚本进行验证。